# 代码结构优化计划文档

## 重构目标
优化ANTLR Playground项目的模块划分，将语法处理相关功能整合到统一的模块结构中。

## 新目录结构
```
apps/web/src/grammar/
├── parser/
│   ├── parser.ts
│   └── treeConverter.ts
├── components/
│   ├── antlrSyntax.ts
│   └── ParseTree.tsx
└── grammars/
    └── Hello.g4
```

## 实施步骤
1. **创建目录结构**
   ```bash
   mkdir -p apps/web/src/grammar/{parser,components,grammars}
   ```

2. **移动文件**
   ```bash
   mv apps/web/src/utils/parser.ts apps/web/src/grammar/parser/
   mv apps/web/src/utils/treeConverter.ts apps/web/src/grammar/parser/
   mv apps/web/src/components/antlrSyntax.ts apps/web/src/grammar/components/
   mv apps/web/src/components/ParseTree.tsx apps/web/src/grammar/components/
   mv apps/web/src/grammar/Hello.g4 apps/web/src/grammar/grammars/
   ```

3. **更新导入路径**
   - 更新`EditorPanel.tsx`中的导入：
     ```typescript
     // 原导入
     import { parseInput } from '../../utils/parser';
     import { convertToTreeData } from '../../utils/treeConverter';
     import ParseTree from './ParseTree';
     
     // 新导入
     import { parseInput } from '../../grammar/parser/parser';
     import { convertToTreeData } from '../../grammar/parser/treeConverter';
     import ParseTree from '../../grammar/components/ParseTree';
     ```
   
   - 更新`App.tsx`中的导入：
     ```typescript
     // 原导入
     import ParseTree from './components/ParseTree';
     
     // 新导入
     import ParseTree from './grammar/components/ParseTree';
     ```
   
   - 更新`parserWorker.ts`中的导入：
     ```typescript
     // 原导入
     import { parse } from '../utils/parser';
     
     // 新导入
     import { parse } from '../grammar/parser/parser';
     ```

4. **验证功能**
   - 运行测试：`pnpm run test`
   - 启动应用：`pnpm run dev:web`

## 预期收益
- 提高代码可维护性
- 增强模块内聚性
- 简化功能扩展
- 改善项目导航体验